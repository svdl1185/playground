{% extends 'base.html' %}

{% block title %}Arbius - Peer-to-peer Machine Learning{% endblock %}

{% block content %}
<!-- Centered Button Section with Animated Questions -->
<section class="w-full min-h-[calc(100vh-5rem)] flex items-center justify-center bg-gradient-to-b from-[#181f3a] to-[#10172a] relative overflow-hidden">
  <div id="questions-bg" class="absolute inset-0 pointer-events-none z-30"></div>
  <div class="relative z-10 text-center">
    <a href="{% url 'playground' %}" class="inline-block border-2 border-white text-white font-semibold px-12 py-4 rounded-full hover:bg-white hover:text-darkbg transition-all duration-300 text-lg">
      Try now
    </a>
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
const QUESTIONS = [
  "Is monogamy natural?",
  "Do aliens exist?",
  "Is free will an illusion?",
  "Can money buy happiness?",
  "Is privacy dead?",
  "Why do people cheat?",
  "Is censorship ever justified?",
  "Are some lies necessary?",
  "Is AI dangerous?",
  "Should voting be mandatory?",
  "Is euthanasia ethical?",
  "Can you love more than one person?",
  "Is the death penalty justified?",
  "Are humans inherently selfish?",
  "Is religion necessary for morality?",
  "Should drugs be legalized?",
  "Is cloning humans ethical?",
  "Is the world getting better or worse?",
  "Are we living in a simulation?",
  "Is it okay to break the law for a good reason?",
  "Should parents be allowed to genetically modify their children?",
  "Is social media destroying society?",
  "Is it possible to truly forgive?",
  "Are some cultures superior to others?",
  "Is patriotism dangerous?",
  "Should animals have the same rights as humans?",
  "Is it ever okay to lie?",
  "Is the customer always right?",
  "Should we fear death?",
  "Is war ever justified?",
  "Is it possible to be truly unbiased?",
  "Are men and women really that different?",
  "Is it okay to keep secrets from loved ones?",
  "Should everyone go to college?",
  "Is it wrong to eat meat?",
  "Is technology making us less human?",
  "Is it possible to be truly selfless?",
  "Should voting age be lowered?",
  "Is it okay to use animals for scientific research?",
  "Is beauty subjective or objective?",
  "Should parents be friends with their children?",
  "Is it okay to be rich in a poor world?",
  "Is love just a chemical reaction?",
  "Should we colonize other planets?",
  "Is it okay to use AI for surveillance?",
  "Is it possible to predict the future?",
  "Should art be censored?",
  "Is it okay to use performance-enhancing drugs?",
  "Is it possible to be happy all the time?",
  "Should we trust the media?",
  "Is it okay to be selfish sometimes?",
  "Is it possible to change your personality?",
  "Should we fear artificial intelligence?",
  "Is it okay to question authority?",
  "Is it possible to live without regrets?",
  "Should we forgive and forget?",
  "Is it okay to be average?",
  "Is it possible to be too honest?",
  "Should we always follow our dreams?",
  "Is it okay to give up?",
  "Is it possible to love someone forever?",
  "Should we always tell the truth?",
  "Is it okay to be different?",
  "Is it possible to be truly free?",
  "Should we always help others?",
  "Is it okay to be proud?",
  "Is it possible to be too kind?",
  "Should we always forgive?",
  "Is it okay to be ambitious?",
  "Is it possible to be too ambitious?",
  "Should we always be optimistic?",
  "Is it okay to be pessimistic?",
  "Is it possible to be too optimistic?",
  "Should we always be realistic?",
  "Is it okay to be unrealistic?",
  "Is it possible to be too realistic?",
  "Should we always be logical?",
  "Is it okay to be illogical?",
  "Is it possible to be too logical?",
  "Should we always be emotional?",
  "Is it okay to be unemotional?",
  "Is it possible to be too emotional?",
  "Should we always be rational?",
  "Is it okay to be irrational?",
  "Is it possible to be too rational?",
  "Should we always be creative?",
  "Is it okay to be uncreative?",
  "Is it possible to be too creative?",
  "Should we always be original?",
  "Is it okay to be unoriginal?",
  "Is it possible to be too original?",
  "Should we always be unique?",
  "Is it okay to be ordinary?",
  "Is it possible to be too unique?",
  "Should we always be normal?",
  "Is it okay to be abnormal?",
  "Is it possible to be too normal?",
  // ... (add more as needed)
];

const TOTAL_QUESTIONS = 60; // Number of floating questions (reduced from 120)
const questionsBg = document.getElementById('questions-bg');
const vw = () => Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
const vh = () => Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

function randomBetween(a, b) {
  return a + Math.random() * (b - a);
}

function createQuestionEl(text) {
  const el = document.createElement('span');
  el.textContent = text;
  el.className = 'absolute whitespace-nowrap text-xs md:text-base font-medium text-textmuted opacity-0 select-none pointer-events-none will-change-transform';
  return el;
}

function animateQuestion(el) {
  // Truly random positioning across the entire screen, but avoid center area
  const centerX = vw() / 2;
  const centerY = vh() / 2;
  const clearRadius = 200; // Clear area around the button
  
  let startX, startY;
  do {
    startX = randomBetween(0, vw());
    startY = randomBetween(0, vh());
  } while (
    Math.sqrt((startX - centerX) ** 2 + (startY - centerY) ** 2) < clearRadius
  );

  // Z-depth: start small, blurry, faint; end large, sharp, opaque
  const startScale = 0.4;
  const endScale = randomBetween(1.5, 2.2);
  const startBlur = 6;
  const endBlur = 0;
  const startOpacity = 0.1;
  const midOpacity = 0.85;
  const endOpacity = 0;

  // Animation duration - slower
  const totalDuration = randomBetween(8, 12); // seconds (increased from 4.5-7.5)
  const fadeInDuration = totalDuration * 0.5;
  const fadeOutDuration = totalDuration * 0.2;

  // Set initial position and style
  el.style.left = `${startX}px`;
  el.style.top = `${startY}px`;
  el.style.opacity = startOpacity;
  el.style.transform = `scale(${startScale})`;
  el.style.filter = `blur(${startBlur}px)`;

  // Animate in (fade in, grow, sharpen)
  setTimeout(() => {
    el.style.transition = `opacity ${fadeInDuration}s linear, transform ${totalDuration}s cubic-bezier(0.22,1,0.36,1), filter ${totalDuration}s linear`;
    el.style.opacity = midOpacity;
    el.style.transform = `scale(${endScale})`;
    el.style.filter = `blur(${endBlur}px)`;
  }, 10);

  // Fade out fast at the end
  setTimeout(() => {
    el.style.transition = `opacity ${fadeOutDuration}s linear`;
    el.style.opacity = endOpacity;
  }, (totalDuration - fadeOutDuration) * 1000);

  // Remove and recycle
  setTimeout(() => {
    el.remove();
    spawnQuestion();
  }, totalDuration * 1000);
}

function spawnQuestion() {
  const text = QUESTIONS[Math.floor(Math.random() * QUESTIONS.length)];
  const el = createQuestionEl(text);
  questionsBg.appendChild(el);
  animateQuestion(el);
}

// Initial spawn
for (let i = 0; i < TOTAL_QUESTIONS; i++) {
  setTimeout(spawnQuestion, Math.random() * 4000);
}

// Responsive: reflow on resize
window.addEventListener('resize', () => {
  questionsBg.innerHTML = '';
  for (let i = 0; i < TOTAL_QUESTIONS; i++) {
    setTimeout(spawnQuestion, Math.random() * 4000);
  }
});
</script>
{% endblock %} 